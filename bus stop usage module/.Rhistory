}'")
a
queryList$insert(a)
a
a <- paste0('{
"query_id": 48,
"busService": "A1",
"sourceBusStop": "LT29",
"destinationBusStop": "COM2",
"ETA": "",
"estimatedVolume": "",',
'"timestamp": {"$date": "',Sys.time(),'"',"}
}'")
a <- paste0('{
"query_id": 48,
"busService": "A1",
"sourceBusStop": "LT29",
"destinationBusStop": "COM2",
"ETA": "",
"estimatedVolume": "",',
'"timestamp": {"$date": "',Sys.time(),'","}
}'")
a
paste0('{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "",')
,'"timestamp": {"$date": "',Sys.time(),'","}}'")
paste0('{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "",','"timestamp": {"$date": "',Sys.time(),'"',"}}'")
a <- paste0('{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "",','"timestamp": {"$date": "',Sys.time(),'"',"}}'")
queryList$insert(a)
a
a<-paste0("'",'{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "",','"timestamp": {"$date": "',Sys.time(),'"',"}}'")
queryList$insert(a)
a<-paste0("'",'{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "","}}'")
a<-paste0(','{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "",}')
a<-paste0("'",'{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "","}'")
a<-paste0("'",'{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": ""',"}'")
a
a<-paste0("'",'{"query_id": 48,"busService": "A1","sourceBusStop": "LT29","destinationBusStop": "COM2","ETA": "","estimatedVolume": "",','"timestamp": {"$date": "',Sys.time(),'"',"}}'")
a
a <- queryList$find()
a
b <- table(cut(a$timestamp, breaks ="hour"))
b
data.frame(b)
c<-data.frame(b)
ts(c$Freq)
b <- table(cut(a$timestamp, breaks ="day"))
c<-data.frame(b)
ts(c$Freq)
ts.plot(ts(c$Freq))
a <- paste0('{
+     "query_id": 48,
+     "busService": "A1",
+     "sourceBusStop": "LT29",
+     "destinationBusStop": "COM2",
+     "ETA": "",
+     "estimatedVolume": "",',
+     '"timestamp": {"$date": "',Sys.time(),'"',"}
+ }'")
mongo(url = "mongodb://<dbuser>:<dbpassword>@ds125565.mlab.com:25565/bt3103")
mongo(url = "mongodb://soraares:bt3103@ds125565.mlab.com:25565/bt3103")
library(mongolite)
library(jsonlite)
library(DT)
library(ggplot2)
library(shiny)
library(forecast)
library(TTR)
queryList <- mongo(db = "local", collection = "queryList")
{
}
a<-{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate("2017-10-14T09:24:29.772Z")
}
a<-{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate("2017-10-14T09:24:29.772Z")
a<-'{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",'
"timestamp" : ISODate("2017-10-14T09:24:29.772Z")
}
a < c(
{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate("2017-10-14T09:24:29.772Z")
})
a < c(
'{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate("2017-10-14T09:24:29.772Z")
}')
a
a <- c('{
"query_id": 48,
"busService": "A1",
"sourceBusStop": "LT29",
"destinationBusStop": "COM2",
"ETA": "",
"estimatedVolume": "",
"timestamp": {$date": "2016-10-11T00:00:00Z"}
}')
a
typeof(a)
queryList$insert(a)
a <- c('{
"query_id": 48,
"busService": "A1",
"sourceBusStop": "LT29",
"destinationBusStop": "COM2",
"ETA": "",
"estimatedVolume": "",
"timestamp": {"$date": "2016-10-11T00:00:00Z"}
}')
queryList$insert(a)
a <- c('{
"query_id": 48,
"busService": "A1",
"sourceBusStop": "LT29",
"destinationBusStop": "COM2",
"ETA": "",
"estimatedVolume": "",
"timestamp": {"$date": "2016-10-11T00:00:00Z"}
}')
sys.time()
Sys.time()
as.character(Sys.time())
a < c(
"'{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(" + as.character(Sys.time()) +"')
}'")
a < c(
'{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(' + as.character(Sys.time()) +')
}')
a < c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(' + as.character(Sys.time()) +')
}'))
a
a < c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(' + as.character(Sys.time()) +')
}'))
a <- c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(' + as.character(Sys.time()) +')
}'))
a
a <- c(
cbind('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(' + as.character(Sys.time()) +')
}'))
a <- c(
cbind('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(',as.character(Sys.time()),')
}'))
a <- c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate(',as.character(Sys.time()),')
}'))
a
queryList$insert(a)
a <- c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : ISODate("',as.character(Sys.time()),'")
}'))
queryList$insert(a)
a
a <- c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : {"$date": ISODate("',as.character(Sys.time()),'")}
}'))
a
queryList$insert(a)
a <- c(
paste0('{
"_id" : ObjectId("59e6e2feca956e76e805762b"),
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : {"$date": "',as.character(Sys.time()),'"}
}'))
queryList$insert(a)
a
Sys.time()
a
a <- c(
paste0('{
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : {"$date": "',as.character(Sys.time()),'"}
}'))
queryList$insert(a)
a <- c(
paste0('{
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : {"$date": "',substring(as.character(Sys.time()), 0, 10),'Z', substring(as.character(Sys.time()), 12, 19),'"}
}'))
a
queryList$insert(a)
a <- c(
paste0('{
"query_id" : 1,
"busService" : "A2",
"sourceBusStop" : "COM2",
"destinationBusStop" : "Opp_Kent_Ridge_MRT",
"ETA" : "",
"estimatedVolume" : "",
"timestamp" : {"$date": "',substring(as.character(Sys.time()), 0, 10),'T', substring(as.character(Sys.time()), 12, 19), 'Z','"}
}'))
queryList$insert(a)
mongo(url = "mongodb://soraares:bt3103@ds125565.mlab.com:25565/bt3103")
runApp()
runApp('D:/Git/Route-Ranger/Crowdsourcing of Bus Volume (Integrated)Bugg.R')
runApp('D:/Git/Route-Ranger/Crowdsourcing of Bus Volume (Integrated)Bugg.R')
runApp()
library(mongolite)
library(DT)
library(jsonlite)
library(ggplot2)
library(shiny)
library(forecast)
library(TTR)
queryList <- mongo(db = "local", collection = "queryList")
a<-querylist$find()
a<-queryList$find()
a
b <- table(cut(a$timestamp, breaks="day"))
b
ts(b)
plot(ts(b))
ts.plot(ts(b))
c<-data.frame(ts(b))
c
a<-querylist$find()
a<-queryList$find()
b <- table(cut(a$timestamp, breaks="day"))
b
c<-data.frame(ts(b))
c
row.names(c) <- c("date", "freq")
typeof(c)
data.frame(c)
c<-data.frame(c)
typeof(c)
c$ts.b.
c$ts
c$ts.b.1
c$ts.b.2
c$ts.b.2017-09-05
c$ts.b."2017-09-05"
ggplot(c)
ts.plot(c)
b
y<-ts(y,freq=12,start=c(2000,1))
y<-arima.sim(model=list(order=c(2,1,1),ar=c(0.5,.3),ma=0.3),n=144)
y
b
type(b)
typeof(b)
a
b<-table(cut(a$timestamp, breaks ="day"))
typeof(b)
y<-ts(b,freq=12,start=c(2000,1))
y
y<-ts(b)
y
yfor<-forecast(y)
yfor
yfor<-SMA(y, 3)
yfor
pd<-funggcast(y,yfor)
library(forecast)
library(forecast)
pd<-forecast::funggcast(y,yfor)
pd<-Forecast::funggcast(y,yfor)
pd<-funggcast(y,yfor)
library(mongolite)
library(jsonlite)
library(DT)
library(ggplot2)
library(shiny)
library(forecast)
library(TTR)
pd<-funggcast(y,yfor)
yfor
typeof(yfor)
y
b
b<-data.frame(b)
b
ggplot() + geom_line(x=b$Var1,y=b$Freq)
ggplot() + geom_line(aes(x=b$Var1,y=b$Freq))
ggplot() + geom_point(aes(x=b$Var1,y=b$Freq))
ggplot() + geom_line(aes(x=b$Var1,y=b$Freq, group=b$Var1))
ggplot(b)
ggplot(b,aes(x=b$Var1, y=b$Freq))
ggplot(b,aes(x=b$Var1, y=b$Freq, group=1))
ggplot(b,aes(x=b$Var1, y=b$Freq, group=1))
runApp()
b
SMA(b$Freq)
SMA(b$Freq, 3)
b
data.frame(b$Var1, SMA(b$Freq, 3))
runApp()
data.frame(b$Var1, SMA(b$Freq, 3), "a")
runApp()
b
SMA(ts(b$Freq),3)
data.frame(SMA(ts(b$Freq),3))
d<-data.frame(SMA(ts(b$Freq),3))
colnames(d) <- c("Count")
d
runApp()
runApp()
b
SMA(ts(b$Freq), 3)
data.frame(b$Freq, SMA(ts(b$Freq), 3))
runApp()
data.frame(b$Var1, SMA(ts(b$Freq), 3))
typeof9b)
typeof(b)
runApp()
library(mongolite)
library(jsonlite)
library(DT)
library(ggplot2)
library(shiny)
library(forecast)
library(TTR)
queryList <- mongo(db = "local", collection = "queryList")
a<- queryList$find()
b <- table(cut(a$timestamp, breaks = "day"))
b
boarding <- table(cut(a$timestamp, breaks = "day"))
boarding
queryList <- mongo(db = "local", collection = "queryList")
a <- queryList$find()
boarding <- table(cut(a$timestamp, breaks = "day"))
boarding <- data.frame(boarding)
boarding$Group <- paste0("Boarding from ", busStop)
colnames(boarding) <- c("timeFrame", "Count", "Group")
queryList <- mongo(db = "local", collection = "queryList")
a <- queryList$find()
boarding <- table(cut(a$timestamp, breaks = "day"))
boarding <- data.frame(boarding)
boarding$Group <- paste0("Boarding from ", "COM2")
colnames(boarding) <- c("timeFrame", "Count", "Group")
boarding
boardingSMA <- data.frame(boarding$timeFrame, SMA(ts(boarding$Count), 3), paste0("Boarding from", busStop, "predicted"))
boardingSMA <- data.frame(boarding$timeFrame, SMA(ts(boarding$Count), 3), paste0("Boarding from COM2 predicted"))
boardingSMA
runApp()
queryList <- mongo(db = "local", collection = "queryList")
a <- queryList$find()
boarding2 <- table(cut(a$timestamp, breaks = "day"))
boarding2 <- data.frame(boarding)
boarding2$Group <- paste0("Boarding from ", "COM2")
colnames(boarding2) <- c("timeFrame", "Count", "Group")
boarding <- table(cut(a$timestamp, breaks = "day"))
boarding <- data.frame(boarding)
boarding$Group <- paste0("Boarding from ", "COM2")
colnames(boarding) <- c("timeFrame", "Count", "Group")
rbind(boarding2, board
)
queryList <- mongo(db = "local", collection = "queryList")
a <- queryList$find()
boarding2 <- table(cut(a$timestamp, breaks = "day"))
boarding2 <- data.frame(boarding)
boarding2$Group <- paste0("Boarding from ", "COM2")
colnames(boarding2) <- c("timeFrame", "Count", "Group")
boarding <- table(cut(a$timestamp, breaks = "day"))
boarding <- data.frame(boarding)
boarding$Group <- paste0("Boarding from ", "COM2")
colnames(boarding) <- c("timeFrame", "Count", "Group")
rbind(boarding2, boarding)
runApp()
boardingSMA <- data.frame(boarding$timeFrame, SMA(ts(boarding$Count), 3), paste0("Boarding from COM2 predicted"))
boardingSMA
time <- ts(boarding$Count)
time <- SMA(ts(boarding$Count), 3)
boardingSMA <- data.frame(boarding$timeFrame, time, paste0("Boarding from COM2 predicted"))
time <- SMA(ts(boarding$Count), 3)
boardingSMA <- data.frame(boarding$timeFrame, time, paste0("Boarding from COM2 predicted"))
boardingSMA
typeof(time)
typeof(ts(b))
ts(b)
typeof(SMA(ts(boarding$Count),3))
boardingSMA2 <- data.frame(boarding2$timeFrame, time, paste0("Boarding from COM2 predicted"))
rbind(boardingSMA, boardingSMA2)
colnames(boardingSMA) <- c("timeFrame", "Count", "Group")
colnames(boardingSMA2) <- c("timeFrame", "Count", "Group")
rbind(boardingSMA, boardingSMA2)
boardingSMA[2,]
boardingSMA[2:10,]
a<-boardingSMA[3:10,]
n<-boardingSMA2[3:10,]
rbind(a,n)
